<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Dependency Injection · React4j</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Dependency Injection · React4j"/><meta property="og:type" content="website"/><meta property="og:url" content="https://react4j.github.io/index.html"/><meta property="og:description" content="**WARNING**: This document is no longer up to date and React4j heavily relies on Arez&#x27;s"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css"/><link rel="alternate" type="application/atom+xml" href="https://react4j.github.io/blog/atom.xml" title="React4j Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://react4j.github.io/blog/feed.xml" title="React4j Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg"/><h2 class="headerTitle">React4j</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/overview.html" target="_self">Docs</a></li><li><a href="/api" target="_self">API</a></li><li><a href="/blog" target="_self">Blog</a></li><li><a href="https://github.com/react4j/react4j/releases" target="_blank">Releases</a></li><li><a href="https://github.com/react4j/react4j" target="_blank">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Reference</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>About</h3><ul><li class="navListItem"><a class="navItem" href="/docs/overview.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/project_setup.html">Project Setup</a></li></ul></div><div class="navGroup navGroupActive"><h3>Reference</h3><ul><li class="navListItem"><a class="navItem" href="/docs/arez.html">Arez</a></li><li class="navListItem"><a class="navItem" href="/docs/compared_to_react.html">Compared to React</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/dependency_injection.html">Dependency Injection</a></li></ul></div><div class="navGroup navGroupActive"><h3>Examples</h3><ul><li class="navListItem"><a class="navItem" href="/docs/todomvc.html">TodoMVC</a></li></ul></div><div class="navGroup navGroupActive"><h3>Project Documentation</h3><ul><li class="navListItem"><a class="navItem" href="/docs/faq.html">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/docs/related_projects.html">Related projects</a></li><li class="navListItem"><a class="navItem" href="/docs/intellij.html">IntelliJ IDEA IDE Setup</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/react4j/react4j/tree/master/docs/dependency_injection.md" target="_blank">Edit</a><h1>Dependency Injection</h1></header><article><div><span><p><strong>WARNING</strong>: This document is no longer up to date and React4j heavily relies on Arez's
<a href="https://arez.github.io/docs/dependency_injection.html">dependency injection</a> which is also not up to date.
We hope to fix this in the medium term.</p>
<p>React4j can be integrated with dependency injection frameworks such as <a href="https://google.github.io/dagger">Dagger2</a>
and <a href="https://code.google.com/archive/p/google-gin/">GIN</a>. The dependency injection framework is responsible
for creating the component and injecting the required dependencies.</p>
<p>The author declares the dependencies of a React4j component by annotating fields or setter methods with
the <code>@Inject</code> annotation. The annotation processor then detects these dependencies and generates the required
infrastructure for injecting dependencies into the react4j component. The author can explicitly control the
injection infrastructure generated by setting the <code>inject</code> parameter on the <code>@ReactComponent</code> annotation.</p>
<p>The <code>@ReactComponent</code> annotation on the component can explicitly enable injection (by setting the value
of the <code>inject</code> parameter to <code>ENABLE</code>), explicitly disable injection (by setting the value of the <code>inject</code>
parameter to <code>DISABLE</code>) or leave value as <code>AUTODETECT</code> to automatically determine whether the injection
infrastructure is required.</p>
<p>Enabling injection for a component will mean that the component will be constructed by an instance of
<code>javax.inject.Provider</code> that is expected to be provided by the injection framework. The enhanced component
subclass will have a static field for the <code>javax.inject.Provider</code> instance that must be configured prior to
instantiating the component. Enabling injection will also result in the addition of an <code>@javax.inject.Inject</code>
annotation being added to the constructor of the enhanced component subclass.</p>
<p>Components that extend <code>ReactArezComponent</code> have slightly different mechanisms for implementing this
functionality and tie into the <a href="https://arez.github.io/docs/dependency_injection.html">dependency injection</a>
infrastructure provided by Arez. However there should be no practical differences from the perspective of a
React4j user.</p>
<h2><a class="anchor" aria-hidden="true" name="dagger2"></a><a href="#dagger2" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dagger2</h2>
<p><a href="https://google.github.io/dagger">Dagger2</a> is a modern take on a dependency injection framework that uses annotation
processors and statically checks the object graph at compilation time. The root objects in the graph are accessed via
a component which is an interface annotated by the <code>@dagger.Component</code> annotation. The injection rules are customized
via <code>@dagger.Module</code> annotated classes.</p>
<p>React4j has greater support for the dagger injection framework than GIN. The <a href="/api/react4j/annotations/ReactComponent.html"><code>@ReactComponent</code></a>
annotation has a <code>dagger</code> parameter that controls whether the React4j annotation processor generates a dagger
subcomponent and supporting module. As with the <code>inject</code> parameter it can be explicitly enabled, disabled or
the default value <code>AUTODETECT</code>. The <code>AUTODETECT</code> value determines whether the component requires injection and
whether dagger is present on the classpath and enables dagger if these conditions are true.</p>
<p>If dagger is enabled then the react4j annotation processor generates an additional class named
<code>[ComponentName]DaggerFactory</code> that aims to simplify integration into dagger based infrastructure.
The infrastructure looks like:</p>
<p><pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MyComponentDaggerFactory</span>
</span>{
  <span class="hljs-function">DaggerSubcomponent <span class="hljs-title">getMyComponentDaggerSubcomponent</span><span class="hljs-params">()</span></span>;

  <span class="hljs-function"><span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bindMyComponent</span><span class="hljs-params">()</span>
  </span>{
    MyComponent_.setProvider( () -&gt; getMyComponentDaggerSubcomponent().get() );
  }

  <span class="hljs-meta">@Module</span>
  <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DaggerModule</span>
  </span>{
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">static</span> Component <span class="hljs-title">provideComponent</span><span class="hljs-params">( <span class="hljs-keyword">final</span> MyComponent_ component )</span>
    </span>{
      <span class="hljs-keyword">return</span> component;
    }
  }

  <span class="hljs-meta">@Subcomponent</span>( modules = DaggerModule.class )
  <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DaggerSubcomponent</span>
  </span>{
    <span class="hljs-function">Provider&lt;Component&gt; <span class="hljs-title">createProvider</span><span class="hljs-params">()</span></span>;

    <span class="hljs-function"><span class="hljs-keyword">default</span> MyComponent <span class="hljs-title">get</span><span class="hljs-params">()</span>
    </span>{
      <span class="hljs-keyword">return</span> (MyComponent) createProvider().get();
    }
  }
}</code></pre></p>
<p>Integration into a dagger component is as simple as extending the <code>[ComponentName]DaggerFactory</code>. This results
in a dagger component like:</p>
<p><pre><code class="hljs"><span class="hljs-meta">@Singleton</span>
<span class="hljs-meta">@Component</span>( modules = { SomeDaggerModule.class } )
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ExampleDaggerComponent</span>
  <span class="hljs-keyword">extends</span> <span class="hljs-title">MyComponentDaggerFactory</span>
</span>{
}</code></pre></p>
<p>The following code example shows how to instantiate the Dagger component and bind the <code>Provider</code>
instance to the enhanced component class. Unfortunately it is currently required that the developer
invokes the <code>bind[ComponentName]()</code> method for every component is injection enabled. In the future this
may not be required but it is at this stage.</p>
<p><pre><code class="hljs"><span class="hljs-keyword">final</span> ExampleDaggerComponent component = DaggerExampleDaggerComponent.create();
component.bindMyComponent();</code></pre></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="compared_to_react.html">← Compared to React</a><a class="docs-next button" href="todomvc.html">TodoMVC →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="React4j" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/overview.html">Overview</a><a href="/api/index.html">API Reference</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" href="https://github.com/react4j/react4j" data-icon="octicon-star" data-count-href="/react4j/react4j/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 the React4j Project.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                apiKey: 'bcbf32ec3754c54aadb410fd32ca236b',
                indexName: 'react4j',
                inputSelector: '#search_input_react'
              });
            </script></body></html>